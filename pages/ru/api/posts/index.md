# Основные сценарии использования

В этом разделе мы подробно рассмотрим ключевые методы API для управления аккаунтами и постами. Все примеры предполагают, что вы уже [получили токен доступа](./auth.md) и передаете его в заголовке `Authorization`.

## Управление аккаунтами социальных сетей

Прежде чем создавать посты, необходимо получить список аккаунтов, в которые вы можете публиковать. Эти аккаунты должны быть предварительно добавлены в веб-интерфейсе ParrotPoster.

## Работа с постами

API позволяет полностью управлять жизненным циклом поста: создание, получение, обновление и удаление.

### Создание поста: `createPost`

**Запрос:**

```graphql
mutation {
  createPost(
    post: {
      fields: { ... }
      networks: { ... }
      publishAt: "2024-01-12T04:00:19.123Z"
    }
  ) {
    id
  }
}
```

Подробнее про мутацию [createPost](./create.md).

### Получение данных поста: `post`

**Запрос:**

```graphql
query {
  post(id: "post_id_12345") {
    id
    fields { ... }
    status
    publishAt
    results { ... }
  }
}
```

Подробнее про запрос [post](./get.md), а также доступные поля в структуре [Post](./item.md).

### Обновление поста: `updatePost`

Позволяет изменить существующий пост. Доступны те же поля, что и при создании. Нельзя обновлять пост по прошедствию суток, с момента его публикации.

```graphql
mutation {
  updatePost(
    id: "post_id_12345"
    post: { fields: { text: "Обновленный текст поста" } }
  ) {
    id
  }
}
```

Подробнее про мутацию [updatePost](./update.md).

### Удаление поста: `deletePost`

```graphql
mutation {
  deletePost(id: "post_id_12345") {
    id
  }
}
```

Подробнее про мутацию [deletePost](./delete.md).

## Важные замечания

1. **Изображения** загружаются автоматически по указанным URL. Сервис скачает их, оптимизирует и прикрепит к посту.
2. **Интервал между постами:** В [настройках](https://parrotposter.com/app/settings/posts) аккаунта в веб-интерфейсе ParrotPoster можно задать минимальный интервал между публикациями (по умолчанию 60 секунд). Это защищает от спама и соблюдает лимиты соцсетей. При этом сами посты через API можно создавать с любой частотой — ограничение применяется только к моменту фактической отправки в соцсеть.
